<!DOCTYPE html>
<html lang="en">

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Cuba admin is super flexible, powerful, clean &amp; modern responsive bootstrap 4 admin template with unlimited possibilities.">
    <meta name="keywords" content="admin template, Cuba admin template, dashboard template, flat admin template, responsive admin template, web app">
    <meta name="author" content="pixelstrap">
    <link rel="icon" href="assets/images/favicon.png" type="image/x-icon">
    <link rel="shortcut icon" href="assets/images/favicon.png" type="image/x-icon">
    <title>Cuba - Premium Admin Template</title>
    <!-- Google font-->
    <link href="https://fonts.googleapis.com/css?family=Rubik:400,400i,500,500i,700,700i&amp;display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,500,500i,700,700i,900&amp;display=swap" rel="stylesheet">
    <!-- Font Awesome-->
    <link rel="stylesheet" type="text/css" href="assets/css/fontawesome.css">
    <!-- ico-font-->
    <link rel="stylesheet" type="text/css" href="assets/css/icofont.css">
    <!-- Themify icon-->
    <link rel="stylesheet" type="text/css" href="assets/css/themify.css">
    <!-- Flag icon-->
    <link rel="stylesheet" type="text/css" href="assets/css/flag-icon.css">
    <!-- Feather icon-->
    <link rel="stylesheet" type="text/css" href="assets/css/feather-icon.css">
    <!-- Plugins css start-->
    <link rel="stylesheet" type="text/css" href="assets/css/animate.css">
    <link rel="stylesheet" type="text/css" href="assets/css/chartist.css">
    <link rel="stylesheet" type="text/css" href="assets/css/date-picker.css">
    <!-- Plugins css Ends-->
    <!-- Bootstrap css-->
    <link rel="stylesheet" type="text/css" href="assets/css/bootstrap.css">
    <!-- App css-->
    <link rel="stylesheet" type="text/css" href="assets/css/style.css">
    <link id="color" rel="stylesheet" href="assets/css/color-1.css" media="screen">
    <!-- Responsive css-->
    <link rel="stylesheet" type="text/css" href="assets/css/responsive.css"> 
</head>

<body>
    <!-- tap on top starts-->
    <div class="tap-top">
        <i data-feather="chevrons-up"></i>
    </div>
    <!-- tap on tap ends-->
    <!-- page-wrapper Start-->
    <div class="page-wrapper compact-wrapper" id="pageWrapper">
        <!-- Page Header Start-->

        <!-- Page Header Ends                              -->
        <!-- Page Body Start-->
        <div class="page-body-wrapper sidebar-icon">
            <!-- Page Sidebar Start-->
            <header class="main-nav">
                <div class="logo-wrapper">
                    <a href="index.html"><img class="img-fluid for-light" src="assets/images/logo/logo.png" alt=""><img class="img-fluid for-dark" src="assets/images/logo/logo_dark.png" alt=""></a>
                    <div class="back-btn">
                        <i class="fa fa-angle-left"></i>
                    </div>
                    <div class="toggle-sidebar">
                        <i class="status_toggle middle" data-feather="grid" id="sidebar-toggle"></i>
                    </div>
                </div>
                <div class="logo-icon-wrapper">
                    <a href="index.html"><img class="img-fluid" src="assets/images/logo/logo-icon.png" alt=""></a>
                </div>
                <nav>
                     <div class="main-navbar">
    <div class="left-arrow" id="left-arrow"><i data-feather="arrow-left"></i></div>
    <div id="mainnav">
        <ul class="nav-menu custom-scrollbar">
            <li class="back-btn">
                <a href="index.html"><img class="img-fluid" src="../assets/images/logo/logo-icon.png" alt=""></a>
                <div class="mobile-back text-right"><span>Back</span><i class="fa fa-angle-right pl-2" aria-hidden="true"></i></div>
            </li>
            <li class="sidebar-title">
                <div>
                    <h6>Fitur admin</h6>
                    <p>data pengguna </p>
                </div>
            </li>
            <li class="dropdown"><a class="nav-link menu-title" href="#"><i data-feather="edit-3"></i><span>Pengguna</span></a>
                <ul class="nav-submenu menu-content">
                    <li><a href="list-pengguna.html"> Data pengguna</a></li>
                    <li><a href="tambah-pengguna.html"> tambahkan pengguna</a></li>
                </ul>
            </li>
            <li class="sidebar-title">
                <div>
                    <h6>Fitur admin</h6>
                    <p>data wisata </p>
                </div>
            </li>
            <li class="dropdown"><a class="nav-link menu-title" href="#"><i data-feather="edit-3"></i><span>Destinasi
                        Wisata</span></a>
                <ul class="nav-submenu menu-content">
                    <li><a href="list-wisata.html"> List wisata</a></li>
                    <li><a href="tambah-wisata.html"> tambahkan wisata</a></li>
                </ul>
            </li>

            <li class="dropdown"><a class="nav-link menu-title" href="#"><i data-feather="edit-3"></i><span>Kunjungan
                        wisata</span></a>
                <ul class="nav-submenu menu-content">
                    <li><a href="form-builder-2.html"> List kunjungan</a></li>
                    <li><a href="form-builder-1.html"> Tambah data kunjungan</a></li>
                    <li><a href="form-builder-1.html"> List kategori Kunjungan</a></li>
                    <li><a href="form-builder-1.html"> Tambah kategori kunjungan</a></li>
                </ul>
            </li>
            <li class="dropdown"><a class="nav-link menu-title" href="#"><i data-feather="edit-3"></i><span>Pengelola Wisata</span></a>
                <ul class="nav-submenu menu-content">
                    <li><a href="list-pengelola.html"> List pengelola</a></li>
                    <li><a href="tambah-pengelola.html"> tambahkan pengelola</a></li>
                </ul>
            </li>
            <li class="dropdown"><a class="nav-link menu-title" href="#"><i data-feather="edit-3"></i><span>Laporan</span></a>
                <ul class="nav-submenu menu-content">
                    <li><a href="laporan-kunjungan.html"> Laporan kunjungan</a></li>
                    <li><a href="laporan-pendapatan.html"> Laporan pendapatan</a></li>
                </ul>
            </li>
            <li class="dropdown"><a class="nav-link menu-title" href="#"><i data-feather="edit-3"></i><span>Info Grafis</span></a>
                <ul class="nav-submenu menu-content">
                    <li><a href="grafik-kunjungan.html"> Grafik kunjungan</a></li>
                    <li><a href="grafik-pendapatan.html"> Grafik pendapatan</a></li>
                </ul>
            </li>
            <li class="sidebar-title">
                <div>
                    <h6 class="ProfileCard-realName text-success">Username</h6>
                    <p class="text-success">Role user : <b class="ProfileCard-Role">Guest</b> </p>
                    <button class="btn btn-success mt-3 text-white col-12" id="logout">Logout</button>
                </div>
            </li>

        </ul>
    </div>
    <div class="right-arrow" id="right-arrow"><i data-feather="arrow-right"></i></div>
</div> 
                </nav>
            </header>
            <!-- Page Sidebar Ends-->
            
<div class="page-body">
    <div class="container-fluid">
        <div class="page-header">
            <div class="row">
                <div class="col-6">
                    <h3>
                        Destinasi Wisata</h3>
                    <ol class="breadcrumb">
                        <li class="breadcrumb-item"><a href="index.html"><i data-feather="home"></i></a>
                        </li>
                        <li class="breadcrumb-item">Dashboard</li>
                    </ol>
                </div>
            </div>
        </div>
    </div>
    <!-- Container-fluid starts-->
    <div class="container-fluid">
        <div class="row">
            <div class="col-sm-12">
                <div class="card">
                    <div class="card-header">
                        <h5>List Wisata</h5><span>List data pariwisata yang terdaftar pada sistem</span>
                    </div>
                    <div class="card-body">
                        <div class="table-responsive">
                            <table class="table table-hover">
                                <thead class="thead-dark">
                                    <tr>
                                        <th scope="col">Foto</th>
                                        <th scope="col">Nama</th>
                                        <th scope="col">Lokasi</th>
                                        <th scope="col">Tiket lokal</th>
                                        <th scope="col">Tiket manca</th>
                                        <th scope="col">Status</th>
                                        <th scope="col">Action</th>
                                    </tr>
                                </thead>
                                <tbody id="wisata">

                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- Container-fluid Ends-->
</div>

            <!-- footer start-->
            <footer class="footer">
                <div class="container-fluid">
                    <div class="row">
                        <div class="col-md-6 footer-copyright">
                            <p class="mb-0">Copyright 2021 Â© Forecast-TD All rights reserved.</p>
                        </div>
                        <div class="col-md-6">
                            <p class="pull-right mb-0">Developed with <i class="fa fa-heart font-secondary"></i> by DevT Brain Corp</p>
                        </div>
                    </div>
                </div>
            </footer>
        </div>
    </div>
    <!-- latest jquery-->
    <script src="assets/js/jquery-3.5.1.min.js"></script>
    <!-- Bootstrap js-->
    <script src="assets/js/bootstrap/popper.min.js"></script>
    <script src="assets/js/bootstrap/bootstrap.js"></script>
    <!-- feather icon js-->
    <script src="assets/js/icons/feather-icon/feather.min.js"></script>
    <script src="assets/js/icons/feather-icon/feather-icon.js"></script>
    <!-- Sidebar jquery-->
    <script src="assets/js/sidebar-menu.js"></script>
    <script src="assets/js/config.js"></script>
    <!-- Plugins JS start-->
    
<script defer src="https://use.fontawesome.com/releases/v6.1.1/js/all.js" integrity="sha384-xBXmu0dk1bEoiwd71wOonQLyH+VpgR1XcDH3rtxrLww5ajNTuMvBdL5SOiFZnNdp" crossorigin="anonymous"></script>
<script>
    $(document).ready(() => {
        var skip = 0;
        var take = 50;
        show()

        function show() {
            $.ajax({
                method: "get",
                url: source + 'place/' + skip + '/' + take,
                data: {
                    'header': token
                },
                dataType: "Json",
                success: function(data, textStatus, jqXHR) {
                    var place = data['data']
                    $.each(place, (index, value) => {
                        if (value.active == 1) {
                            var status = `<p class="text-success"><i class="fa-solid fa-circle-check"></i> Aktif</p>`;

                        } else {
                            var status = `<p class="text-danger"><i class="fa-solid fa-circle-xmark"></i> Nonaktif</p>`;
                        }

                        if (value.image == null) {
                            var image = `<img src="https://i.pinimg.com/originals/ae/8a/c2/ae8ac2fa217d23aadcc913989fcc34a2.png" alt="foto wisata" sizes="40" style="width:100px; object-fit: cover;">`
                        } else {
                            var image = `<img src="` +protocol+domain+'storage'+ value.image.split("public")[1] + `" alt="foto wisata" style="width:100px; object-fit: cover;">`
                        }
                        var wisata = `<tr>
                                        <td>` + image + `</td>
                                        <td>` + value.name + `</td>
                                        <td>` + value.location + `</td>
                                        <td> Rp.` + value.fee_local + `</td>
                                        <td> Rp.` + value.fee_inter + `</td>
                                        <td>` + status + `</td>
                                        <td>
                                            <button id="edit" val="` + value.id + `" class="btn btn-primary text-white"><i class="fa-solid fa-pen"></i></button>
                                            <button id="delete" val="` + value.id + `" class="btn btn-danger text-white"><i class="fa-solid fa-trash"></i></button>
                                        </td>
                                    </tr>`
                        $("#wisata").append(wisata)
                    })

                },
                error: function(jqXHR, textStatus, errorThrown) {
                    alert('error :' + textStatus);
                    console.log(errorThrown);
                    if(jqXHR.status ==401){
                        keluar()
                    }
                }
            })
        }
    })
</script>
<script>
    function keluar() {
        localStorage.clear()
        masuk()
    }

    function masuk() {
        location.replace('login.html')
    }

    $(document).ready(() => {
        var value = localStorage.getItem('api_token');
        var username = localStorage.getItem('username');
        var role = localStorage.getItem('role')



        if (value == '' || value == null || username == '' || username == null || role == '' || role == null) {
            masuk()
        }

        $(".ProfileCard-realName").html(username)
        $(".ProfileCard-Role").html(role)

        $("#logout").click(() => {
            keluar()
        })
    });
</script>

    <!-- Plugins JS Ends-->
    <!-- Theme js-->
    <script src="assets/js/script.js"></script>
    <script src="assets/js/theme-customizer/customizer.js"></script>
    <!-- login js-->
    <!-- Plugin used-->
    <!-- custom js by me -->
    <script src="assets/general.js"></script>
    <!-- custom js by me end -->
</body>

</html>